program  : p=instruction* { Block(p) };

instruction
    :  i=ID COLON { JumpPoint(i.value) };
    :  opcode=INSTRUCTION params=params { Instruction(opcode.value, params) };

params  :  first=factor rest=(COMMA factor)* { process_params(first, rest) };

factor
    :  LPAREN i=factor RPAREN { Address(i) };
    :  i=ID { Register(i.value.lower()) if i.value.lower() in REGISTERS else JumpPointer(i.value) };
    :  i=num { i };

num  :  i= INT | HEX | BIN { Number(i.value) };